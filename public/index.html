<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <!-- Upewnij się, że twój meta tag viewport wciąż blokuje skalowanie na urządzeniach mobilnych -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Prosta Platformówka Multiplayer - Pokoje</title>
    <link rel="stylesheet" href="style.css">

    <!-- ===== NOWY FRAGMENT BLOKUJĄCY ZOOM PRZEGLĄDARKI ===== -->
    <script>
        // Zapobiegaj zoomowi za pomocą kółka myszy z wciśniętym Ctrl
        document.addEventListener('wheel', function(event) {
            if (event.ctrlKey) {
                event.preventDefault();
            }
        }, { passive: false }); // 'passive: false' jest konieczne, aby preventDefault() działało

        // Zapobiegaj zoomowi za pomocą klawiszy Ctrl + '+' / Ctrl + '-' / Ctrl + '0'
        document.addEventListener('keydown', function(event) {
            if (event.ctrlKey && (event.key === '+' || event.key === '-' || event.key === '0')) {
                event.preventDefault();
            }
        });
    </script>
</head>
<body>
    <!-- Canvas dla tła menu, który będzie za div#lobby -->
    <canvas id="menuCanvas"></canvas>

    <div id="lobby">
        <h1>Catch</h1>
        <p>Twoja nazwa: <span id="myUsername"></span> (Kolor: <span id="myColorDisplay" style="display: inline-block; width: 20px; height: 20px; border: 1px solid black;"></span>)</p>

        <div class="room-actions">
            <input type="text" id="newRoomName" placeholder="Nazwa nowego pokoju (opcjonalnie)">
            <button id="createRoomBtn">Stwórz Pokój</button>
        </div>

        <h2>Dostępne Pokoje:</h2>
        <ul id="roomList">
            <!-- Pokoje będą ładowane tutaj przez JS -->
            <li>Brak dostępnych pokoi. Stwórz jeden!</li>
        </ul>
    </div>

    <!-- ZMIANA 1: Dodano "position: relative;" do stylu. To sprawia, że ten div jest ramką odniesienia dla nakładki. -->
    <div id="gameContainer" style="display: none; position: relative;">
        <button id="leaveRoomBtn">Opuść Pokój</button>
        <canvas id="gameCanvas"></canvas> <!-- BEZ atrybutów width/height tutaj -->
        
        <!-- ZMIANA 2: Dodano nową warstwę (div) do obsługi efektów kolorystycznych. -->
        <div id="cycleOverlay"></div>

    </div>

    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script> 
    <script src="/socket.io/socket.io.js"></script> 

    <!-- Skrypty gry -->
    <script src="js/biomemanager.js"></script>
    <script src="js/host.js"></script> 
    
    <!-- Nowy skrypt do obsługi świata w tle menu -->
    <script src="js/menuworld.js"></script>

    <script src="js/cycle.js"></script>
    <script src="script.js"></script>
</body>
</html>